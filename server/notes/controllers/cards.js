'use strict';

//TODO: there was an init_app in python notes

var thesecards =
[
    {
        "stackid": "52e64725b0d86d435868dc8f",
        "title": "Budget reparation",
        "urlattachments": null,
        "fileattachments": null,
        "content": "14.2.12.162/2",
        "modifiedat": "2014-02-24T09:14:15",
        "_cls": "Card",
        "owner": null,
        "id": "530aff57b0d86d1ec06c3b9c",
        "createdat": "2014-02-24T09:14:15"
    },
    {
        "stackid": "52dc1b91b0d86d4eb8e47c61",
        "title": "Sync",
        "urlattachments": null,
        "fileattachments": null,
        "content": "Last photo reviews:\nClaire ok\nCommon: ok\nChris 2002+2003, dann 2008 inclus\n\nClaire iphone: 20140222\nChris iPhone: 20140222\nChis Kamera: 20131123",
        "modifiedat": "2014-02-23T13:29:05",
        "_cls": "Card",
        "owner": null,
        "id": "5309d05bb0d86d1ec06c3b9a",
        "createdat": "2014-02-23T11:41:31"
    },
    {
        "stackid": "52d83365b0d86d40cfa29012",
        "title": "Chrome CORS",
        "urlattachments": null,
        "fileattachments": null,
        "content": "Chrome does not support localhost for CORS requests (an open bug since 2010).\n\nTo get around this you can use a domain like lvh.me (which points at 127.0.0.1 just like localhost) or start chrome with the --disable-web-security flag (assuming you're just testing).",
        "modifiedat": "2014-02-21T15:45:42",
        "_cls": "Card",
        "owner": null,
        "id": "53076696b0d86d1ec06c3b97",
        "createdat": "2014-02-21T15:45:42"
    },
    {
        "stackid": "52d83365b0d86d40cfa29012",
        "title": "Screen capture node, pageres",
        "urlattachments": [
            {
                "url": "http://www.codersgrid.com/2014/02/19/pageres-screen-capture-for-cli-and-node-js/",
                "position": 0,
                "id": "53060c24b0d86d1ec06c3b95",
                "cardid": "53060c25b0d86d1ec06c3b96"
            }
        ],
        "fileattachments": null,
        "content": "",
        "modifiedat": "2014-02-20T15:07:33",
        "_cls": "Card",
        "owner": null,
        "id": "53060c25b0d86d1ec06c3b96",
        "createdat": "2014-02-20T15:07:33"
    },
    {
        "stackid": "52d83365b0d86d40cfa29012",
        "title": "Twisted",
        "urlattachments": [
            {
                "url": "http://krondo.com/?page_id=1327",
                "position": 0,
                "id": "53060bdeb0d86d1ec06c3b91",
                "cardid": "53060bdeb0d86d1ec06c3b92"
            }
        ],
        "fileattachments": null,
        "content": "",
        "modifiedat": "2014-02-20T15:06:22",
        "_cls": "Card",
        "owner": null,
        "id": "53060bdeb0d86d1ec06c3b92",
        "createdat": "2014-02-20T15:06:22"
    },
    {
        "stackid": "52dc1b91b0d86d4eb8e47c61",
        "title": "WAP Password",
        "urlattachments": null,
        "fileattachments": null,
        "content": "admin/admin",
        "modifiedat": "2014-02-18T19:15:38",
        "_cls": "Card",
        "owner": null,
        "id": "5303a34ab0d86d1ec06c3b8e",
        "createdat": "2014-02-18T19:15:38"
    },
    {
        "stackid": "52d6d61ab0d86d36ded5fe85",
        "title": "sudo and environment variables",
        "urlattachments": null,
        "fileattachments": null,
        "content": "Use sudo -E",
        "modifiedat": "2014-02-13T15:23:00",
        "_cls": "Card",
        "owner": null,
        "id": "52fcd544b0d86d1ec06c3b8a",
        "createdat": "2014-02-13T15:23:00"
    },
    {
        "stackid": "52d6d61ab0d86d36ded5fe85",
        "title": "Common system commands",
        "urlattachments": null,
        "fileattachments": null,
        "content": "Ports:\nnetstat -antp\nProcesses:\nps aux",
        "modifiedat": "2014-02-13T11:37:24",
        "_cls": "Card",
        "owner": null,
        "id": "52fca064b0d86d1ec06c3b89",
        "createdat": "2014-02-13T11:37:24"
    },
    {
        "stackid": "52d6d61ab0d86d36ded5fe85",
        "title": "Persisten settings",
        "urlattachments": null,
        "fileattachments": null,
        "content": "Simple Startup scripts: /etc/rc.local\nComplex startup services: upstart\nEnvironment variables: /etc/environment\n\ncustomrc.zsh file in the directory /etc/zsh/zshrc.d.\n\n\nFstab\n#Files server\n//lnssrv011.glims.lu/bioseq     /mnt/files-bioseq       cifs    rw,credentials=/etc/glimspwd,uid=1000,gid=1000,_netdev",
        "modifiedat": "2014-02-13T14:45:47",
        "_cls": "Card",
        "owner": null,
        "id": "52fc9989b0d86d1ec06c3b88",
        "createdat": "2014-02-13T11:08:09"
    },
    {
        "stackid": "52fa2285b0d86d1ec06c3b6a",
        "title": "VNC",
        "urlattachments": [
            {
                "url": "http://ubuntuwiki.net/index.php/Xrdp,_installing",
                "position": 0,
                "id": "52fc7af6b0d86d1ec06c3b7b",
                "cardid": "52fc70aab0d86d1ec06c3b78"
            },
            {
                "url": "http://askubuntu.com/questions/135483/how-to-configure-xrdp-to-start-cinnamon-as-default-desktop-session",
                "position": 1,
                "id": "52fc8112b0d86d1ec06c3b83",
                "cardid": "52fc70aab0d86d1ec06c3b78"
            }
        ],
        "fileattachments": [
            {
                "position": 0,
                "cardid": "52fc70aab0d86d1ec06c3b78",
                "id": "52fc7b45b0d86d1ec06c3b7e",
                "filename": "Xrdp_installing_-_Ubuntuwiki.pdf"
            },
            {
                "position": 1,
                "cardid": "52fc70aab0d86d1ec06c3b78",
                "id": "52fc83fdb0d86d1ec06c3b87",
                "filename": "startwm.sh"
            }
        ],
        "content": "Forget vino (only works when logged in  on server), install xrdp. Then configure a clean session that then logs in via vino. \n\nYou need to run: gnome-session --session=ubuntu-2d\n\nUse rdp and login via port 3389. Set color top 16bit, no higher otherwise you get a black screen\n\nSee ubuntuask question to set unity 2d as default",
        "modifiedat": "2014-02-13T09:36:18",
        "_cls": "Card",
        "owner": null,
        "id": "52fc70aab0d86d1ec06c3b78",
        "createdat": "2014-02-13T08:13:46"
    },
    {
        "stackid": "52fa8250b0d86d1ec06c3b70",
        "title": "Et fehlt",
        "urlattachments": null,
        "fileattachments": null,
        "content": "Frittefett\nM\u00ebtschen",
        "modifiedat": "2014-02-11T21:47:36",
        "_cls": "Card",
        "owner": null,
        "id": "52fa8c68b0d86d1ec06c3b75",
        "createdat": "2014-02-11T21:47:36"
    },
    {
        "stackid": "52fa8250b0d86d1ec06c3b70",
        "title": "Fleesch",
        "urlattachments": null,
        "fileattachments": null,
        "content": "- Rumsteak (keen bio do, letzebuerger bauer)\n- Filet de Boeuf 1-2",
        "modifiedat": "2014-02-11T21:30:06",
        "_cls": "Card",
        "owner": null,
        "id": "52fa8797b0d86d1ec06c3b74",
        "createdat": "2014-02-11T21:27:03"
    },
    {
        "stackid": "52fa8250b0d86d1ec06c3b70",
        "title": "Gedrenks",
        "urlattachments": null,
        "fileattachments": null,
        "content": "xContrex\nxJus, Tropicana\nxLimonad\nxMellech",
        "modifiedat": "2014-02-23T12:03:12",
        "_cls": "Card",
        "owner": null,
        "id": "52fa877cb0d86d1ec06c3b73",
        "createdat": "2014-02-11T21:26:36"
    },
    {
        "stackid": "52fa8250b0d86d1ec06c3b70",
        "title": "Soss",
        "urlattachments": null,
        "fileattachments": null,
        "content": "Frittefett\nMetschen\nBrout",
        "modifiedat": "2014-02-11T21:26:54",
        "_cls": "Card",
        "owner": null,
        "id": "52fa84dfb0d86d1ec06c3b72",
        "createdat": "2014-02-11T21:15:27"
    },
    {
        "stackid": "52fa8250b0d86d1ec06c3b70",
        "title": "Gemeis - Uebst",
        "urlattachments": null,
        "fileattachments": null,
        "content": "Muss Bio:\nxGefrueren Iebsen\nxZalot (M\u00e2che)\nxZitroun\nxBananen\nx\u00c4ppel - Elster\nBieren(keng bio do)\n\n\nMuss net Bio\nxConcombre\nxHambier - Schwarzbier",
        "modifiedat": "2014-02-11T21:23:02",
        "_cls": "Card",
        "owner": null,
        "id": "52fa849ab0d86d1ec06c3b71",
        "createdat": "2014-02-11T21:14:18"
    },
    {
        "stackid": "52fa2285b0d86d1ec06c3b6a",
        "title": "Proxy env",
        "urlattachments": null,
        "fileattachments": null,
        "content": "System wide:\n/etc/environment",
        "modifiedat": "2014-02-11T14:17:22",
        "_cls": "Card",
        "owner": null,
        "id": "52fa22e2b0d86d1ec06c3b6c",
        "createdat": "2014-02-11T14:17:22"
    },
    {
        "stackid": "52fa2285b0d86d1ec06c3b6a",
        "title": "Proxy apt",
        "urlattachments": null,
        "fileattachments": null,
        "content": "/etc/apt/apt.conf\nAcquire::http::proxy \"http://proxy.etat.lu:80\";\nAcquire::https::proxy \"http://proxy.etat.lu:80\";",
        "modifiedat": "2014-02-11T14:16:20",
        "_cls": "Card",
        "owner": null,
        "id": "52fa229db0d86d1ec06c3b6b",
        "createdat": "2014-02-11T14:16:13"
    },
    {
        "stackid": "52f3a69db0d86d1ec06c3b44",
        "title": "Mongo install",
        "urlattachments": [
            {
                "url": "http://docs.mongodb.org/manual/tutorial/install-mongodb-on-ubuntu/",
                "position": 0,
                "id": "52f3ac44b0d86d1ec06c3b57",
                "cardid": "52f3abd9b0d86d1ec06c3b54"
            }
        ],
        "fileattachments": null,
        "content": "http://docs.mongodb.org/manual/tutorial/install-mongodb-on-ubuntu/",
        "modifiedat": "2014-02-06T16:37:40",
        "_cls": "Card",
        "owner": null,
        "id": "52f3abd9b0d86d1ec06c3b54",
        "createdat": "2014-02-06T16:35:53"
    },
    {
        "stackid": "52f3a69db0d86d1ec06c3b44",
        "title": "NPM behind proxy",
        "urlattachments": null,
        "fileattachments": null,
        "content": "npm config set registry http://registry.npmjs.org/\n\nnpm config set proxy http://proxy.company.com:8080\nnpm config set https-proxy http://proxy.company.com:8080",
        "modifiedat": "2014-02-06T16:34:04",
        "_cls": "Card",
        "owner": null,
        "id": "52f3ab5bb0d86d1ec06c3b50",
        "createdat": "2014-02-06T16:33:47"
    },
    {
        "stackid": "52f3a69db0d86d1ec06c3b44",
        "title": "PPA for nodejs",
        "urlattachments": [
            {
                "url": "https://launchpad.net/~chris-lea/+archive/node.js",
                "position": 0,
                "id": "52f3a874b0d86d1ec06c3b4b",
                "cardid": "52f3a875b0d86d1ec06c3b4c"
            },
            {
                "url": "https://github.com/joyent/node/wiki/Installing-Node.js-via-package-manager#ubuntu-mint",
                "position": 1,
                "id": "52f3a888b0d86d1ec06c3b4f",
                "cardid": "52f3a875b0d86d1ec06c3b4c"
            }
        ],
        "fileattachments": null,
        "content": "",
        "modifiedat": "2014-02-06T16:21:44",
        "_cls": "Card",
        "owner": null,
        "id": "52f3a875b0d86d1ec06c3b4c",
        "createdat": "2014-02-06T16:21:25"
    },
    {
        "stackid": "52f3a69db0d86d1ec06c3b44",
        "title": "Starting point for MEAN",
        "urlattachments": [
            {
                "url": "http://mean.io/",
                "position": 0,
                "id": "52f3a6acb0d86d1ec06c3b47",
                "cardid": "52f3a6aeb0d86d1ec06c3b48"
            }
        ],
        "fileattachments": null,
        "content": "http://mean.io/",
        "modifiedat": "2014-02-06T16:21:58",
        "_cls": "Card",
        "owner": null,
        "id": "52f3a6aeb0d86d1ec06c3b48",
        "createdat": "2014-02-06T16:13:50"
    },
    {
        "stackid": "52d83365b0d86d40cfa29012",
        "title": "Checklist",
        "urlattachments": [
            {
                "url": "http://webdevchecklist.com/",
                "position": 0,
                "id": "52f38f5fb0d86d1ec06c3b42",
                "cardid": "52f38f61b0d86d1ec06c3b43"
            }
        ],
        "fileattachments": null,
        "content": "",
        "modifiedat": "2014-02-06T14:34:25",
        "_cls": "Card",
        "owner": null,
        "id": "52f38f61b0d86d1ec06c3b43",
        "createdat": "2014-02-06T14:34:25"
    },
    {
        "stackid": "52d83365b0d86d40cfa29012",
        "title": "CSS3 Generator",
        "urlattachments": [
            {
                "url": "http://css3generator.com/",
                "position": 0,
                "id": "52f38dabb0d86d1ec06c3b3e",
                "cardid": "52f38dabb0d86d1ec06c3b3f"
            }
        ],
        "fileattachments": null,
        "content": "",
        "modifiedat": "2014-02-06T14:27:07",
        "_cls": "Card",
        "owner": null,
        "id": "52f38dabb0d86d1ec06c3b3f",
        "createdat": "2014-02-06T14:27:07"
    },
    {
        "stackid": "52d83365b0d86d40cfa29012",
        "title": "Web tools",
        "urlattachments": [
            {
                "url": "http://speckyboy.com/2014/01/30/40-tiny-web-based-apps-tools-web-designers/",
                "position": 0,
                "id": "52f38a26b0d86d1ec06c3b3a",
                "cardid": "52f38a27b0d86d1ec06c3b3b"
            }
        ],
        "fileattachments": null,
        "content": "Spinners",
        "modifiedat": "2014-02-06T14:29:59",
        "_cls": "Card",
        "owner": null,
        "id": "52f38a27b0d86d1ec06c3b3b",
        "createdat": "2014-02-06T14:12:07"
    },
    {
        "stackid": "52d83365b0d86d40cfa29012",
        "title": "Character encoding",
        "urlattachments": [
            {
                "url": "http://webmonkeyuk.wordpress.com/2011/04/23/how-to-avoid-character-encoding-problems-in-php/",
                "position": 0,
                "id": "52ef8038b0d86d0e461682d3",
                "cardid": "52ef8038b0d86d0e461682d4"
            }
        ],
        "fileattachments": null,
        "content": "",
        "modifiedat": "2014-02-03T12:40:40",
        "_cls": "Card",
        "owner": null,
        "id": "52ef8038b0d86d0e461682d4",
        "createdat": "2014-02-03T12:40:40"
    },
    {
        "stackid": "52dd6b9bb0d86d6e45e39c12",
        "title": "DVD releases",
        "urlattachments": [
            {
                "url": "http://www.newdvdreleasedates.com/",
                "position": 0,
                "id": "52ee92c9b0d86d0e461682ce",
                "cardid": "52ee92c9b0d86d0e461682cf"
            }
        ],
        "fileattachments": null,
        "content": "",
        "modifiedat": "2014-02-02T19:47:37",
        "_cls": "Card",
        "owner": null,
        "id": "52ee92c9b0d86d0e461682cf",
        "createdat": "2014-02-02T19:47:37"
    },
    {
        "stackid": "52dc1b91b0d86d4eb8e47c61",
        "title": "Rowing machines",
        "urlattachments": null,
        "fileattachments": [
            {
                "position": 0,
                "cardid": "52ee9250b0d86d0e461682cb",
                "id": "52ee9242b0d86d0e461682c3",
                "filename": "image.jpg"
            },
            {
                "position": 1,
                "cardid": "52ee9250b0d86d0e461682cb",
                "id": "52ee924fb0d86d0e461682ca",
                "filename": "image.jpg"
            }
        ],
        "content": "",
        "modifiedat": "2014-02-02T19:45:36",
        "_cls": "Card",
        "owner": null,
        "id": "52ee9250b0d86d0e461682cb",
        "createdat": "2014-02-02T19:45:36"
    },
    {
        "stackid": "52d83365b0d86d40cfa29012",
        "title": "Cookies vs tokens",
        "urlattachments": [
            {
                "url": "http://blog.auth0.com/2014/01/07/angularjs-authentication-with-cookies-vs-token/",
                "position": 0,
                "id": "52eaca44b0d86d6c7c1f61bf",
                "cardid": "52eaca45b0d86d6c7c1f61c0"
            }
        ],
        "fileattachments": null,
        "content": "",
        "modifiedat": "2014-01-30T22:55:17",
        "_cls": "Card",
        "owner": null,
        "id": "52eaca45b0d86d6c7c1f61c0",
        "createdat": "2014-01-30T22:55:17"
    },
    {
        "stackid": "52dd6b9bb0d86d6e45e39c12",
        "title": "Watchlist",
        "urlattachments": null,
        "fileattachments": null,
        "content": "If no next episode. Check for status. If continuing do not put ended but TBA",
        "modifiedat": "2014-02-02T19:42:52",
        "_cls": "Card",
        "owner": null,
        "id": "52eac927b0d86d6c7c1f61bc",
        "createdat": "2014-01-30T22:50:31"
    },
    {
        "stackid": "52dd6b9bb0d86d6e45e39c12",
        "archivedat": "2014-01-30T21:50:43",
        "title": "Invert episode list",
        "stacktitleafterarchived": "Oto",
        "fileattachments": null,
        "content": "",
        "modifiedat": "2014-01-30T22:50:41",
        "_cls": "Card",
        "urlattachments": null,
        "owner": null,
        "id": "52e9749eb0d86d63315488b9",
        "createdat": "2014-01-29T22:37:34"
    },
    {
        "stackid": "52ad96c60dbd8511767ce868",
        "title": "Stuff",
        "urlattachments": null,
        "fileattachments": null,
        "content": "Cadzand an der belge. Heiser fir ze lounen bei der Plage. \n\n160x146 deif schaf roudemer\n\nRhezonativ\n\nmailto:Arno_militz@yahoo.com\n\nMothur",
        "modifiedat": "2014-01-29T12:17:10",
        "_cls": "Card",
        "owner": null,
        "id": "52e8e336b0d86d435868dca4",
        "createdat": "2014-01-29T12:17:10"
    },
    {
        "stackid": "52d6d61ab0d86d36ded5fe85",
        "title": "Screencast",
        "urlattachments": [
            {
                "url": "http://www.omgubuntu.co.uk/2013/12/simple-screen-recorder-linux",
                "position": 0,
                "id": "52e7898cb0d86d435868dc9d",
                "cardid": "52e7898db0d86d435868dc9e"
            }
        ],
        "fileattachments": null,
        "content": "",
        "modifiedat": "2014-01-28T11:42:21",
        "_cls": "Card",
        "owner": null,
        "id": "52e7898db0d86d435868dc9e",
        "createdat": "2014-01-28T11:42:21"
    },
    {
        "stackid": "52dd6b9bb0d86d6e45e39c12",
        "archivedat": "2014-01-30T21:50:53",
        "title": "Episodelist CSS options in select",
        "stacktitleafterarchived": "Oto",
        "fileattachments": null,
        "content": "",
        "modifiedat": "2014-01-30T22:50:51",
        "_cls": "Card",
        "urlattachments": [
            {
                "url": "http://plnkr.co/edit/rbc4GWBffi4eFYhbvS6u?p=preview",
                "position": 0,
                "id": "52e6dc1cb0d86d435868dc97",
                "cardid": "52e6dc1cb0d86d435868dc98"
            }
        ],
        "owner": null,
        "id": "52e6dc1cb0d86d435868dc98",
        "createdat": "2014-01-27T23:22:20"
    },
    {
        "stackid": "52e64725b0d86d435868dc8f",
        "title": "To check: Helix A, bioinformatics",
        "urlattachments": null,
        "fileattachments": null,
        "content": "",
        "modifiedat": "2014-01-27T12:47:44",
        "_cls": "Card",
        "owner": null,
        "id": "52e64760b0d86d435868dc92",
        "createdat": "2014-01-27T12:47:44"
    },
    {
        "stackid": "52e64725b0d86d435868dc8f",
        "title": "Wiges username: olich, pwd: wiges123",
        "urlattachments": null,
        "fileattachments": null,
        "content": "",
        "modifiedat": "2014-02-21T07:56:07",
        "_cls": "Card",
        "owner": null,
        "id": "52e6473cb0d86d435868dc91",
        "createdat": "2014-01-27T12:47:08"
    },
    {
        "stackid": "52e64725b0d86d435868dc8f",
        "title": "Pay APLNS",
        "urlattachments": null,
        "fileattachments": null,
        "content": "",
        "modifiedat": "2014-01-27T12:46:53",
        "_cls": "Card",
        "owner": null,
        "id": "52e6472db0d86d435868dc90",
        "createdat": "2014-01-27T12:46:53"
    },
    {
        "stackid": "52e62e38b0d86d435868dc8d",
        "title": "Dr Burgard",
        "urlattachments": null,
        "fileattachments": null,
        "content": "Provinzialstra\u00dfe 59, 66787 Wadgassen, Germany\n+49 6834 7820490\nBioresonanz",
        "modifiedat": "2014-01-27T11:00:40",
        "_cls": "Card",
        "owner": null,
        "id": "52e62e48b0d86d435868dc8e",
        "createdat": "2014-01-27T11:00:40"
    },
    {
        "stackid": "52dd6b9bb0d86d6e45e39c12",
        "archivedat": "2014-01-26T22:06:38",
        "title": "next episode",
        "stacktitleafterarchived": "Oto",
        "fileattachments": null,
        "content": "http://services.tvrage.com/tools/quickinfo.php?show=elementary",
        "modifiedat": "2014-01-26T23:06:38",
        "_cls": "Card",
        "urlattachments": [
            {
                "url": "http://services.tvrage.com/tools/quickinfo.php?show=elementary",
                "position": 0,
                "id": "52e51a60b0d86d38093963f9",
                "cardid": "52e51a62b0d86d38093963fa"
            }
        ],
        "owner": null,
        "id": "52e51a62b0d86d38093963fa",
        "createdat": "2014-01-26T15:23:30"
    },
    {
        "stackid": "52d83365b0d86d40cfa29012",
        "title": "Async.js seems interesting if I ever want to go for Node js",
        "urlattachments": [
            {
                "url": "https://github.com/caolan/async",
                "position": 0,
                "id": "52e2879cb0d86d6e45e39c33",
                "cardid": "52e2879cb0d86d6e45e39c34"
            }
        ],
        "fileattachments": null,
        "content": "",
        "modifiedat": "2014-02-02T19:42:35",
        "_cls": "Card",
        "owner": null,
        "id": "52e2879cb0d86d6e45e39c34",
        "createdat": "2014-01-24T16:32:44"
    },
    {
        "stackid": "52e2610eb0d86d6e45e39c2e",
        "title": "detect mobile",
        "urlattachments": null,
        "fileattachments": null,
        "content": "var ismobile = (/iphone|ipad|ipod|android|blackberry|mini|windows\\sce|palm/i.test(navigator.userAgent.toLowerCase()));\n\n\tif (!ismobile) {\n\t\t// Desktop\n\t\t$.root_.addClass(\"desktop-detected\");\n\t\t$.device = \"desktop\";\n\t} else {\n\t\t// Mobile\n\t\t$.root_.addClass(\"mobile-detected\");\n\t\t$.device = \"mobile\";\n\t\t\n\t\t// remove 300ms delay from apple touch devices\n\t\t// dependency: plugin/smartclick/smartclick.js\n\t\tif ($.enableFastClick){\n\t\t\t$('nav ul a').noClickDelay();\n\t\t\t$('#hide-menu a').noClickDelay();\n\t\t}\n\t}",
        "modifiedat": "2014-01-24T13:48:27",
        "_cls": "Card",
        "owner": null,
        "id": "52e2611bb0d86d6e45e39c2f",
        "createdat": "2014-01-24T13:48:27"
    },
    {
        "stackid": "52d4dc81b0d86d1d853416a9",
        "title": "Oli mir 10\u20ac vun indies",
        "urlattachments": null,
        "fileattachments": null,
        "content": "",
        "modifiedat": "2014-01-21T22:33:12",
        "_cls": "Card",
        "owner": null,
        "id": "52dee733b0d86d6e45e39c28",
        "createdat": "2014-01-21T22:31:31"
    },
    {
        "stackid": "52dd6b9bb0d86d6e45e39c12",
        "title": "Modal iphone",
        "urlattachments": [
            {
                "url": "http://jschr.github.io/bootstrap-modal/bs3.html",
                "position": 0,
                "id": "52de66a7b0d86d6e45e39c22",
                "cardid": "52de66a7b0d86d6e45e39c23"
            }
        ],
        "fileattachments": null,
        "content": "",
        "modifiedat": "2014-01-21T13:23:03",
        "_cls": "Card",
        "owner": null,
        "id": "52de66a7b0d86d6e45e39c23",
        "createdat": "2014-01-21T13:23:03"
    },
    {
        "stackid": "52dd6b9bb0d86d6e45e39c12",
        "title": "Page load shows all, not floating but not always",
        "urlattachments": null,
        "fileattachments": null,
        "content": "",
        "modifiedat": "2014-01-21T13:20:34",
        "_cls": "Card",
        "owner": null,
        "id": "52de542ab0d86d6e45e39c1e",
        "createdat": "2014-01-21T12:04:10"
    },
    {
        "stackid": "52dd6b9bb0d86d6e45e39c12",
        "title": "Small caps on username field",
        "urlattachments": null,
        "fileattachments": null,
        "content": "",
        "modifiedat": "2014-01-20T19:32:23",
        "_cls": "Card",
        "owner": null,
        "id": "52dd6bb7b0d86d6e45e39c13",
        "createdat": "2014-01-20T19:32:23"
    },
    {
        "stackid": "52dc1b91b0d86d4eb8e47c61",
        "title": "Kommoud op al getrimmt",
        "urlattachments": null,
        "fileattachments": null,
        "content": "Als occasioum kaf fir 400 \u20ac. 20 rue des vignobles mondorf. Ass aus Grange Bereldange. Zesummen bezuelt",
        "modifiedat": "2014-01-20T08:24:37",
        "_cls": "Card",
        "owner": null,
        "id": "52dc1c62b0d86d4eb8e47c63",
        "createdat": "2014-01-19T19:41:38"
    },
    {
        "stackid": "52dc1b91b0d86d4eb8e47c61",
        "title": "Kleng blo b\u00e4nk an farwegen teppich",
        "urlattachments": null,
        "fileattachments": null,
        "content": "Bank aus trendhopper 200\u20ac\nTeppich aus Miwel Alwisse. 149\u20ac\nZesumen bezuelt",
        "modifiedat": "2014-01-19T19:39:52",
        "_cls": "Card",
        "owner": null,
        "id": "52dc1bf8b0d86d4eb8e47c62",
        "createdat": "2014-01-19T19:39:52"
    },
    {
        "stackid": "52d83365b0d86d40cfa29012",
        "title": "Create direct google drive links",
        "urlattachments": [
            {
                "url": "http://feedly.com/k/1co6lru",
                "position": 0,
                "id": "52da2c9eb0d86d4eb8e47c5f",
                "cardid": "52da2cb5b0d86d4eb8e47c60"
            }
        ],
        "fileattachments": null,
        "content": "From digital inspiration",
        "modifiedat": "2014-01-19T19:47:24",
        "_cls": "Card",
        "owner": null,
        "id": "52da2cb5b0d86d4eb8e47c60",
        "createdat": "2014-01-18T08:26:45"
    },
    {
        "stackid": "52d83365b0d86d40cfa29012",
        "title": "web devel blogs",
        "urlattachments": [
            {
                "url": "http://www.pontikis.net/blog/10-web-development-blogs-you-should-follow",
                "position": 0,
                "id": "52da26c0b0d86d4eb8e47c58",
                "cardid": "52da26c1b0d86d4eb8e47c59"
            }
        ],
        "fileattachments": null,
        "content": "",
        "modifiedat": "2014-01-20T11:01:40",
        "_cls": "Card",
        "owner": null,
        "id": "52da26c1b0d86d4eb8e47c59",
        "createdat": "2014-01-18T08:01:21"
    },
    {
        "stackid": "52d83365b0d86d40cfa29012",
        "title": "Promises vs callbacks",
        "urlattachments": [
            {
                "url": "http://www.html5rocks.com/en/tutorials/es6/promises/",
                "position": 0,
                "id": "52da25e4b0d86d4eb8e47c54",
                "cardid": "52da25e6b0d86d4eb8e47c55"
            }
        ],
        "fileattachments": null,
        "content": "",
        "modifiedat": "2014-01-20T11:01:42",
        "_cls": "Card",
        "owner": null,
        "id": "52da25e6b0d86d4eb8e47c55",
        "createdat": "2014-01-18T07:57:42"
    },
    {
        "stackid": "52d83365b0d86d40cfa29012",
        "title": "Web caching flask",
        "urlattachments": [
            {
                "url": "https://github.com/shuhaowu/flask-appcache/blob/master/README.md",
                "position": 0,
                "id": "52d9882eb0d86d4eb8e47c50",
                "cardid": "52d9883bb0d86d4eb8e47c51"
            }
        ],
        "fileattachments": null,
        "content": "",
        "modifiedat": "2014-01-17T20:44:59",
        "_cls": "Card",
        "owner": null,
        "id": "52d9883bb0d86d4eb8e47c51",
        "createdat": "2014-01-17T20:44:59"
    },
    {
        "stackid": "52d83365b0d86d40cfa29012",
        "title": "Great post on SO about website security",
        "urlattachments": [
            {
                "url": "http://stackoverflow.com/questions/549/the-definitive-guide-to-form-based-website-authentication#477579",
                "position": 0,
                "id": "52d95ccdb0d86d499cd56d8e",
                "cardid": "52d95ccfb0d86d499cd56d8f"
            }
        ],
        "fileattachments": null,
        "content": "http://stackoverflow.com/questions/549/the-definitive-guide-to-form-based-website-authentication#477579",
        "modifiedat": "2014-01-17T17:39:43",
        "_cls": "Card",
        "owner": null,
        "id": "52d95ccfb0d86d499cd56d8f",
        "createdat": "2014-01-17T17:39:43"
    },
    {
        "stackid": "52d83365b0d86d40cfa29012",
        "title": "Ios statusbar fix and plugins",
        "urlattachments": [
            {
                "url": "http://www.icenium.com/blog/icenium-team-blog/2013/11/07/everything-hybrid-web-apps-need-to-know-about-the-status-bar-in-ios7",
                "position": 0,
                "id": "52d8fc26b0d86d499cd56d8a",
                "cardid": "52d8fc27b0d86d499cd56d8b"
            }
        ],
        "fileattachments": null,
        "content": "",
        "modifiedat": "2014-01-17T10:47:37",
        "_cls": "Card",
        "owner": null,
        "id": "52d8fc27b0d86d499cd56d8b",
        "createdat": "2014-01-17T10:47:19"
    },
    {
        "stackid": "52d83365b0d86d40cfa29012",
        "title": "Beautiful icons letters",
        "urlattachments": [
            {
                "url": "http://www.chatfield.k12.mn.us/SiteCollectionImages/Forms/Thumbnails.aspx?Paged=TRUE&p_SortBehavior=0&p_FileLeafRef=068489-antique-glowing-copper-orb-icon-alphanumeric-letter-k.png&p_ID=968&RootFolder=%2FSiteCollectionImages%2Fantique-glowing-copper-orb-icon-alphanumeric-full-set%2F068580-antique-glowing-copper-orb-icon-alphanumeric-full-set&PageFirstRow=691&&View=%7B64CF9839-D484-4643-A0BE-A27A59CB1320%7D",
                "position": 0,
                "id": "52d8ef03b0d86d4882ec23bb",
                "cardid": "52d8ef07b0d86d4882ec23bc"
            }
        ],
        "fileattachments": [
            {
                "position": 0,
                "cardid": "52d8ef07b0d86d4882ec23bc",
                "id": "52d8f315b0d86d4882ec23c1",
                "filename": "apple-touch-icon-120x120.jpg"
            }
        ],
        "content": "",
        "modifiedat": "2014-01-17T10:24:19",
        "_cls": "Card",
        "owner": null,
        "id": "52d8ef07b0d86d4882ec23bc",
        "createdat": "2014-01-17T09:51:19"
    },
    {
        "stackid": "52d83365b0d86d40cfa29012",
        "title": "Ios specific",
        "urlattachments": [
            {
                "url": "http://matt.might.net/articles/how-to-native-iphone-ipad-apps-in-javascript/",
                "position": 0,
                "id": "52d83380b0d86d40cfa29015",
                "cardid": "52d83386b0d86d40cfa29016"
            },
            {
                "url": "https://gist.github.com/tfausak/2222823",
                "position": 1,
                "id": "52d8ed1ab0d86d4882ec23b8",
                "cardid": "52d83386b0d86d40cfa29016"
            }
        ],
        "fileattachments": null,
        "content": "",
        "modifiedat": "2014-01-17T09:43:34",
        "_cls": "Card",
        "owner": null,
        "id": "52d83386b0d86d40cfa29016",
        "createdat": "2014-01-16T20:31:18"
    },
    {
        "stackid": "52ad96c60dbd8511767ce868",
        "archivedat": "2014-01-15T19:49:47",
        "title": "",
        "stacktitleafterarchived": "Floating",
        "duedate": "2014-01-15T19:49:00.530000",
        "fileattachments": null,
        "content": "",
        "modifiedat": "2014-01-15T20:49:48",
        "_cls": "Card",
        "urlattachments": null,
        "owner": null,
        "id": "52d6e62f0dbd851425cd4d22",
        "createdat": "2014-01-15T20:49:03"
    },
    {
        "stackid": "52ad96c60dbd8511767ce868",
        "archivedat": "2014-01-15T19:49:49",
        "title": "",
        "stacktitleafterarchived": "Floating",
        "duedate": "2014-01-15T19:48:35.554000",
        "fileattachments": null,
        "content": "",
        "modifiedat": "2014-01-15T20:49:50",
        "_cls": "Card",
        "urlattachments": null,
        "owner": null,
        "id": "52d6e6180dbd851425cd4d21",
        "createdat": "2014-01-15T20:48:40"
    },
    {
        "stackid": "52ad96c60dbd8511767ce868",
        "archivedat": "2014-01-15T19:49:51",
        "title": "",
        "stacktitleafterarchived": "Floating",
        "duedate": "2014-01-15T19:47:26.131000",
        "fileattachments": null,
        "content": "",
        "modifiedat": "2014-01-15T20:49:51",
        "_cls": "Card",
        "urlattachments": null,
        "owner": null,
        "id": "52d6e5d10dbd851425cd4d20",
        "createdat": "2014-01-15T20:47:29"
    },
    {
        "stackid": "52ad96c60dbd8511767ce868",
        "archivedat": "2014-01-15T19:49:53",
        "title": "",
        "stacktitleafterarchived": "Floating",
        "duedate": "2014-01-15T19:42:15.003000",
        "fileattachments": null,
        "content": "",
        "modifiedat": "2014-01-15T20:49:54",
        "_cls": "Card",
        "urlattachments": null,
        "owner": null,
        "id": "52d6e49f0dbd851425cd4d1f",
        "createdat": "2014-01-15T20:42:23"
    },
    {
        "stackid": "52ad96c60dbd8511767ce868",
        "archivedat": "2014-01-15T19:49:55",
        "title": "dsadas",
        "stacktitleafterarchived": "Floating",
        "fileattachments": null,
        "content": "",
        "modifiedat": "2014-01-15T20:49:56",
        "_cls": "Card",
        "urlattachments": null,
        "owner": null,
        "id": "52d6e41f0dbd851425cd4d1e",
        "createdat": "2014-01-15T20:40:15"
    },
    {
        "stackid": "52ad96c60dbd8511767ce868",
        "archivedat": "2014-01-15T19:49:57",
        "title": "",
        "stacktitleafterarchived": "Floating",
        "duedate": "2014-01-15T19:40:08.761000",
        "fileattachments": null,
        "content": "",
        "modifiedat": "2014-01-15T20:49:57",
        "_cls": "Card",
        "urlattachments": null,
        "owner": null,
        "id": "52d6e41c0dbd851425cd4d1d",
        "createdat": "2014-01-15T20:40:12"
    },
    {
        "stackid": "52ad96c60dbd8511767ce868",
        "archivedat": "2014-01-15T19:49:59",
        "title": "ewq",
        "stacktitleafterarchived": "Floating",
        "duedate": "2014-01-15T19:27:32.530000",
        "fileattachments": null,
        "content": "",
        "modifiedat": "2014-01-15T20:50:00",
        "_cls": "Card",
        "urlattachments": null,
        "owner": null,
        "id": "52d6e1260dbd851425cd4d1c",
        "createdat": "2014-01-15T20:27:34"
    },
    {
        "stackid": "52d6d61ab0d86d36ded5fe85",
        "title": "A2Hosting set timezone",
        "urlattachments": [
            {
                "url": "http://www.a2hosting.com/kb/developer-corner/linux/changing-the-time-zone-in-the-linux-shell",
                "position": 0,
                "id": "52d6d64ab0d86d36ded5fe89",
                "cardid": "52d6d630b0d86d36ded5fe86"
            }
        ],
        "fileattachments": null,
        "content": "The initial timezone of A2Hosting (Iceland) is way off)\nCreate ~/.profile and add:\nTZ='Europe/Luxembourg'; export TZ",
        "modifiedat": "2014-01-15T19:42:50",
        "_cls": "Card",
        "owner": null,
        "id": "52d6d630b0d86d36ded5fe86",
        "createdat": "2014-01-15T13:40:48"
    },
    {
        "stackid": "52d6aa06b0d86d2e0cacdcbf",
        "archivedat": "2014-01-21T06:53:50",
        "title": "Haut um 8:12 komm",
        "stacktitleafterarchived": "Important",
        "fileattachments": null,
        "content": "",
        "modifiedat": "2014-01-21T07:53:48",
        "_cls": "Card",
        "urlattachments": null,
        "owner": null,
        "id": "52d6aa23b0d86d2e0cacdcc0",
        "createdat": "2014-01-15T10:32:51"
    },
    {
        "stackid": "52d4dc81b0d86d1d853416a9",
        "title": "Kohn",
        "urlattachments": null,
        "fileattachments": null,
        "content": "47 plus 24",
        "modifiedat": "2014-01-14T01:43:31",
        "_cls": "Card",
        "owner": null,
        "id": "52d4da55b0d86d1d853416a8",
        "createdat": "2014-01-14T01:33:57"
    },
    {
        "stackid": "52c5bf930dbd8514667d3c3b",
        "title": "Haut bis 7:15 geschlof",
        "urlattachments": null,
        "fileattachments": [
            {
                "position": 0,
                "cardid": "52d4d60cb0d86d1d853416a7",
                "id": "52d62e71b0d86d2e0cacdcb7",
                "filename": "image.jpg"
            },
            {
                "position": 1,
                "cardid": "52d4d60cb0d86d1d853416a7",
                "id": "52d62e7cb0d86d2e0cacdcbd",
                "filename": "image.jpg"
            }
        ],
        "content": "",
        "modifiedat": "2014-01-15T10:33:57",
        "_cls": "Card",
        "owner": null,
        "id": "52d4d60cb0d86d1d853416a7",
        "createdat": "2014-01-14T01:15:40"
    },
    {
        "stackid": "52d6aaa2b0d86d2e0cacdcc1",
        "title": "WOT Map",
        "urlattachments": null,
        "fileattachments": [
            {
                "position": 3,
                "cardid": "52d424dbb0d86d1d8534167f",
                "id": "52d450feb0d86d1d85341696",
                "filename": "image.jpg"
            },
            {
                "position": 1,
                "cardid": "52d424dbb0d86d1d8534167f",
                "id": "52ed4540b0d86d6c7c1f61d2",
                "filename": "wotmapdetail.jpg"
            },
            {
                "position": 2,
                "cardid": "52d424dbb0d86d1d8534167f",
                "id": "52ed454fb0d86d6c7c1f61db",
                "filename": "characters.pdf"
            }
        ],
        "content": "",
        "modifiedat": "2014-02-01T20:04:47",
        "_cls": "Card",
        "owner": null,
        "id": "52d424dbb0d86d1d8534167f",
        "createdat": "2014-01-13T12:39:39"
    }
];

/**
 * Load mongo models into mongoose
 */

require('../models/models.js');

var mongoose = require('mongoose'),
    _ = require('underscore'),
    Card = mongoose.model('Card'),
    Att = mongoose.model('Att');


exports.getall = function(req, res) {
    var currentuser_id = req.session.passport.user;

    Card
    .find({owner: currentuser_id})
    .populate('fileattachments')
    .sort({createdat:-1})
    .exec(function (err, cards) {
        if (err) {
            console.log(err)
            return res.send(error, 500)
        }
        res.send(cards, 200);
    });
};

exports.get = function(req, res) {
    var cardid = req.params.cardid;

    Card.findOne({_id:cardid})
    .exec(function(err, card) {
        if (err) return res.send(err, 500);

        res.send(card);

    });
};

exports.post = function(req, res) {
    var currentuser_id = req.session.passport.user,
        title = req.body.card.title,
        content = req.body.card.content,
        duedate = req.body.card.duedate,
        stackid = req.body.card.stackid;

    var clientid = req.body.clientid;
    var card = new Card({title: title, content: content, stackid: stackid, owner: currentuser_id});

    if (duedate) {
        card.duedate = duedate;
    }

    card.save(function(err) {
        if (err) {
            console.log(err);
            return res.send(err, 500);
        }
        res.send({card: card, clientid: clientid}, 201)
    })
};

exports.put = function(req, res) {
    var cardid = req.params.cardid,
        newTitle = req.body.title,
        newContent = req.body.content,
        archivedat = req.body.archivedat,
        duedate = req.body.duedate,
        stacktitleafterarchived = req.body.stacktitleafterarchived,
        stackid = req.body.stackid;

    Card
    .findById(cardid)
    .populate('fileattachments')
    .exec(function (err, card) {
        if (err) {
            console.log(err);
            return res.send(err, 500);
        }
        if (!card) {
            console.log('card not found');
            return res.send('card not found', 500);
        }

        if (newTitle) card.title = newTitle;
        if (newContent) card.content = newContent;
        card.duedate = duedate; //if no duedate, user maybe wants to remove it

        if (archivedat) {
            card.archivedat = archivedat;
            card.stacktitleafterarchived = stacktitleafterarchived;
        }
        if (stackid) card.stackid = stackid;

        card.save(function(err) {
            if (err) {
                console.log(err);
                return res.send(err, 500);
            }
            res.send(card, 201)
        })
    })
};

exports.delete = function(req, res) {
    var cardid = req.params.cardid;

    Card
    .findById(cardid)
    .exec(function (err, card) {
        if (err) {
            console.log(err);
            return res.send(err, 500);
        }
        if (!card) {
            console.log('card not found');
            return res.send('card not found', 500);
        }
        card.remove(function(err) {
            if (err) {
                console.log(err);
                return res.send(err, 500);
            }
            res.send(card, 200)
        })
    })
};
exports.upload = function(req, res) {
  var cardid = req.body.cardid,
      clientid = req.body.clientid,
      reqatt = JSON.parse(req.body.att);
  var position = reqatt.position,
    filename = reqatt.filename;


  var att = new Att({
        position: position,
        filename: filename,
        cardid: cardid
    });

  //Get att type
  var attType = 'default';
  console.log(req.body)
  if (req.files.file.type.search('image/') > -1) attType = 'image';

  att.attach(attType, req.files.file, function(err) {
    if(err) return res.send(err, 500);

    att.save(function(err) {
      if(err) res.send(err, 500);

      //Save to card
      if (cardid) {
        Card
        .findById(cardid)
        .exec(function (err, card) {
            if (err) {
                console.log(err);
                return res.send(err, 500);
            }
            if (!card) {
                console.log('card not found');
                return res.send('card not found', 500);
            }
            card.fileattachments.push(att);
            card.save(function(err) {
                if (err) {
                    console.log(err);
                    return res.send(err, 500);
                }
                res.send(att, 200)
            })
        })
      } else {
          res.send(att, 201);
      }

    });
  })
};

exports.deleteAtts = function(req, res) {
  var cardid = req.body.cardid,
      reqatt_ids = JSON.parse(req.body.array);

      //TODO if cancelling do not change modifiedat

     Card
    .findById(cardid)
    .exec(function (err, card) {
        if (err) {
            console.log(err);
            return res.send(err, 500);
        }
        if (!card) {
            console.log('card not found');
            return res.send('card not found', 500);
        }
        _.each(reqatt_ids, function(attid) {
            card.fileattachments.remove(attid);
        });

        card.save(function(err) {
            if (err) {
                console.log(err);
                return res.send(err, 500);
            }
            res.send(card, 200)
        })
    })
};