doctype html
html(lang='en', data-ng-app='oto')
    head
        meta(charset='utf-8')
        title Organize the Olingers
        link(rel='stylesheet', href='/css/app.css')
        link(href="/lib/bootstrap/dist/css/bootstrap.min.css", rel="stylesheet")
        link(href="/lib/font-awesome/css/font-awesome.min.css", rel="stylesheet")
        link(href="/lib/ng-table/ng-table.css", rel="stylesheet")
        link(href="/img/favicon.ico", rel="shortcut icon", type="image/x-icon")

    body(data-ng-cloak)

        .navbar(data-ng-controller="NavCtrl")
            .navbar-inner
                .container-fluid
                    ul.nav.nav-tabs
                        li(data-access-level='accessLevels.anon', active-nav)
                            a(href='/login') Log in
                        li(data-access-level='accessLevels.user', active-nav)
                            a(href='/') Home
                        li(data-access-level='accessLevels.user', active-nav='nestedTop')
                            a(href='/watchlist') Watchlist
                        li(data-access-level='accessLevels.user', active-nav='nestedTop')
                            a(href='/household') Household
                        li(data-access-level='accessLevels.user', active-nav)
                            a(href='/automation') Automation
                        li(data-access-level='accessLevels.admin', active-nav)
                            a(href='/admin') Admin
                        li(data-access-level='accessLevels.user')
                            a(href="", data-ng-click="logout()")
                                | Log out
                        div#userInfo.pull-right(data-access-level='accessLevels.user')
                            | Welcome&nbsp;
                            strong {{ user.username }}&nbsp;
                            span.label(data-ng-class='{"label-info": user.role.title == userRoles.user.title, "label-success": user.role.title == userRoles.admin.title}') {{ user.role.title }}
            ng-include(src="core.subnav")
        .container(data-ui-view)
        #alertBox.alert.alert-danger(data-ng-show="error")
            button(type="button", class="close", data-ng-click="error = null;") &times;
            strong Oh no!&nbsp;
            span(data-ng-bind="error")

        //Dependencies
        script(src='/lib/jquery/jquery.min.js')
        script(src='/lib/underscore/underscore-min.js')
        script(src='/lib/angular/angular.min.js')
        script(src='/lib/angular-cookies/angular-cookies.min.js')
        script(src='/lib/angular-ui-router/release/angular-ui-router.min.js')
        script(src='/lib/ng-table/ng-table.js')
        
        //Core
        script(src='/js/core/routingConfig.js')
        script(src='/js/core/app.js')
        script(src='/js/core/NavCtrl.js')
        script(src='/js/core/services.js')
        script(src='/js/core/directives.js')
        
        script(type="text/ng-template", id="404")
            include ./404
        script(type="text/ng-template", id="401")
            include ./401

        //Login
        script(src='/js/login/LoginCtrl.js')
        script(type="text/ng-template", id="login")
            include ../login/login        

        //Admin
        script(src='/js/admin/AdminCtrl.js')
        script(type="text/ng-template", id="admin")
            include ../admin/admin
        
        //Home
        script(src='/js/home/HomeCtrl.js')
        script(type="text/ng-template", id="home")
            include ../home/home
        
        //Automation
        script(src='/js/automation/AutomationCtrl.js')
        script(type="text/ng-template", id="automation")
            include ../automation/automation
            
        //Watchlist
        script(src='/js/watchlist/SeriesCtrl.js')
        script(type="text/ng-template", id="watchlist/subnav")
            include ../watchlist/subnav
        script(type="text/ng-template", id="watchlist/series")
            include ../watchlist/series
        
        //Household
        script(src='/js/household/CompensateCtrl.js')
        script(src='/js/household/KittiesCtrl.js')
        script(type="text/ng-template", id="household/subnav")
            include ../household/subnav
        script(type="text/ng-template", id="household/compensate")
            include ../household/compensate
        script(type="text/ng-template", id="household/kitties")
            include ../household/kitties
